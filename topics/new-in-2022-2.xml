<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic SYSTEM "https://resources.jetbrains.com/stardust/html-entities.dtd">

<topic xsi:noNamespaceSchemaLocation="https://resources.jetbrains.com/stardust/topic.v2.xsd"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       title="Inspections. What is new in 2022.2?"
       id="new-in-2022-2">

    <!-- TODO This needs to be reread and rephrased -->
    <p>This page provides the list of changes in %product% inspections as of version 2022.2.</p>

    <!-- TODO I need to describe what newly added, enabled, reorganized, and disabled inspections mean -->
    <!-- TODO What warning, weak warning-->
    <!-- TODO What does the disabled mean in the table below. Is it disabled by default? -->

    <chapter id="new-in-2022-2-jvm" title="Qodana for JVM and Qodana Community for JVM">

        <chapter id="new-in-2022-2-jvm-new" title="New inspections">

            <table>
                <tr><td>Inspection name</td><td>Severity</td><td>Description</td></tr>
                <tr>
                    <td><code>RegExpRedundantClassElement </code></td>
                    <td>Weak warning</td>
                    <td>
                        <p>Redundant <code>\d</code>, <code>[:digit:]</code>, or <code>\D</code> class elements.</p>
                        <p>The <code>[\w+\d]</code> regular expression can be written as <code>[\w+]</code> because
                            <code>\w</code> already includes <code>\d</code>.</p>
                    </td>
                </tr>
                <tr><td><code>MarkdownIncorrectlyNumberedListItem</code></td><td>Warning</td>
                    <td>
                        <p>Incorrectly numbered list item.</p>
                        <p>Marks an ordered list like <code>1. 2. 4.</code> as inconsistently numbered. After rendering,
                            this list is displayed as <code>1. 2. 3.</code>, but the inconsistency makes editing the
                            source code harder.</p></td></tr>
            </table>

            <p>This table contains the list of new Kotlin inspections.</p>
            <table>
                <tr><td>Inspection name</td><td>Severity</td><td>Description</td></tr>
                <tr>
                    <td><code>NoConstructorMigration</code></td>
                    <td>Disabled; error</td>
                    <td>Forbidden constructor call</td>
                </tr>
                <tr>
                    <td><code>PatternVariableHidesField</code></td>
                    <td>Warning</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td><code>AddConversionCallMigration</code></td>
                    <td>Disabled; warning</td>
                    <td>Explicit conversion from <code>Int</code> required starting from version 1.9 of Kotlin</td>
                </tr>
                <tr>
                    <td><code>AmbiguousExpressionInWhenBranchMigration</code></td>
                    <td>Disabled; warning</td>
                    <td>Ambiguous logical expressions in <code>when</code> branches starting from version 1.7 of Kotlin</td>
                </tr>
                <tr>
                    <td><code>CastDueToProgressionResolutionChangeMigration</code></td>
                    <td>Disabled; warning</td>
                    <td>Progression resolution change starting from version 1.9 of Kotlin</td>
                </tr>
                <tr>
                    <td><code>InlineClassDeprecatedMigration</code></td>
                    <td>Disabled; warning</td>
                    <td>Inline classes are deprecated starting from version 1.5 of Kotlin</td>
                </tr>
                <tr>
                    <td><code>OverrideDeprecatedMigration</code></td>
                    <td>Disabled; error</td>
                    <!-- TODO What does this mean? -->
                    <td>Do not propagate method deprecation through overrides since 1.9</td>
                </tr>
            </table>

            <!-- TODO What is DevKit? -->
            <p>Below is the list of inspections related to the code style and DevKit.</p>

            <table>
                <tr><td>Inspection name</td><td>Severity</td><td>Description</td></tr>
                <tr>
                    <td><code>KotlinJvmAnnotationInJava</code></td>
                    <td>Warning</td>
                    <td>Kotlin JVM annotation in Java</td>
                </tr>
                <tr>
                    <td><code>KotlinRedundantDiagnosticSuppress</code></td>
                    <td>Warning</td>
                    <td>Redundant diagnostic suppression</td>
                </tr>
                <tr>
                    <td><code>NonStrictComparisonCanBeEquality</code></td>
                    <td>Weak warning</td>
                    <td>Non-strict inequality <code>&gt;=</code> or <code>&lt;=</code> that can be replaced with <code>==</code></td>
                </tr>
                <tr>
                    <td><code>ReassignedVariable</code></td>
                    <!-- TODO What does this severity mean? -->
                    <td>Text attributes</td>
                    <td>The variable was previously reassigned</td>
                </tr>
                <tr>
                    <td><code>VerboseNullabilityAndEmptiness</code></td>
                    <!-- TODO What does this severity mean? -->
                    <td>Weak warning</td>
                    <!-- TODO What kind of emptiness should be checked here? -->
                    <td>Check verbose nullability and emptiness.</td>
                </tr>
                <tr>
                    <td><code>WorkspaceImplAbsent</code></td>
                    <td>Warning</td>
                    <td>Absent entity implementation</td>
                </tr>
                <tr>
                    <td><code>WorkspaceImplObsolete</code></td>
                    <td>Warning</td>
                    <td>Obsolete version of entity implementation</td>
                </tr>
            </table>
        </chapter>

        <chapter id="new-in-2022-2-jvm-refactored" title="Refactored inspections">

            <p>In 2022.2, several Kotlin and JUnit inspections were refactored.</p>

            <p></p>

            <table>
                <tr><td>Inspection name</td><td>Severity</td><td>Description</td></tr>
                <tr>
                    <td><code>OverridingDeprecatedMember</code></td>
                    <td>Disabled; error</td>
                    <td>Was renamed for <code>OverrideDeprecatedMigration</code></td>
                </tr>
                <tr>
                    <td><code>MainFunctionReturnUnitInspection</code></td>
                    <!-- TODO What is the inspection severity? -->
                    <td>-</td>
                    <td>Check for the <code>@Test</code> annotated methods was moved to <code>JUnitMalformedeclaration</code></td>
                </tr>
                <tr>
                    <td><code>JUnitMalformedDeclaration</code></td>
                    <td>Warning</td>
                    <td><p>Works only for Kotlin. </p>
                        <p>Reports JUnit test member declarations that are malformed and not recognized by the JUnit test
                            framework. Such declarations could result in non-executed tests or lifecycle methods.</p>
                    </td>
                </tr>
            </table>

            <p>Several of the old inspections were disabled by default. Starting from 2022.2, several inspections that were
                previously disabled by default all these checks are enabled by default, there is no way to disable them individually.
                </p>

            <table>
                <tr>
                    <td>Inspection name</td>
                    <td>Description</td>
                </tr>
                <tr>
                    <td><code>TestMethodIsPublicVoidNoArg</code></td>
                    <td>Marks test methods that are annotated with <code>@Test</code> but do not have the required signature.</td>
                </tr>
                <tr>
                    <td><code>StaticSuite</code></td>
                    <td>The <code>suite()</code> method is not declared as static</td>
                </tr>
                <tr>
                    <td><code>BeforeClassOrAfterClassIsPublicStaticVoidNoArg</code></td>
                    <td> Malformed <code>@BeforeClass</code>, <code>@BeforeAll</code>, <code>@AfterClass</code>, or <code>@AfterAll</code> method.
                        Prior to 2022.2, this inspection was disabled.
                    </td>
                </tr>
                <tr>
                    <td><code>BeforeOrAfterIsPublicVoidNoArg</code></td>
                    <td>Malformed <code>@Before</code> or <code>@After</code> method. Prior to 2022.2, this inspection was disabled.</td>
                </tr>
                <tr>
                    <td><code>JUnit5MalformedExtensions</code></td>
                    <td>JUnit 5 malformed extension registration</td>
                </tr>
                <tr>
                    <td><code>JUnit5MalformedNestedClass</code></td>
                    <td>JUnit 5 malformed <code>@Nested</code> class</td>
                </tr>
                <tr>
                    <td><code>Junit5MalformedParameterized</code></td>
                    <td>Malformed parameterized tests. Prior to 2022.2, this inspection was disabled.</td>
                </tr>
                <tr>
                    <td><code>JUnit5MalformedRepeated</code></td>
                    <td>JUnit 5 malformed repeated test</td>
                </tr>
                <tr>
                    <td><code>JUnitDatapoint</code></td>
                    <td>Malformed <code>@DataPoint</code> field. Prior to 2022.2, this inspection was disabled.</td>
                </tr>
                <tr>
                    <td><code>JUnitRule</code></td>
                    <td>Malformed <code>@Rule</code> or <code>@ClassRule</code> field. Prior to 2022.2, this inspection was disabled.</td>
                </tr>
                <tr>
                    <td><code>MalformedSetUpTearDown</code></td>
                    <td>Malformed <code>setUp()</code> or <code>tearDown()</code> method. Prior to 2022.2, this inspection was disabled.</td>
                </tr>
                <tr>
                    <td><code>UnconstructableTestCase</code></td>
                    <td>Reports JUnit test cases that cannot be constructed because they have an invalid constructor.
                        Test cases like these will not be picked up by the JUnit test runner and will therefore not execute.
                    The inspection severity is <code>Warning</code>.</td>
                </tr>
            </table>
        </chapter>

        <chapter id="new-in-2022-2-jvm-enabled" title="Enabled inspections">

            <table>
                <tr>
                    <td>Inspection name</td>
                    <td>Severity</td>
                    <td>Description</td>
                </tr>
                <tr>
                    <td><code>RegExpSimplifiable</code></td>
                    <td>Warning</td>
                    <td>A regular expression like <code>[\wa-z\d]</code> can be simplified to just <code>\w</code> because it
                        already includes <code>a-z</code> as well as numerals.</td>
                </tr>
                <tr>
                    <td><code>RegExpSuspiciousBackref</code></td>
                    <td>Weak warning</td>
                    <td>A regular expression like <code>\1(abc)</code> cannot match anything because <code>\1</code> refers
                        to <code>abc</code> that is not yet defined when evaluating  <code>\1</code>. This inspection
                        prevents simple typos in regular expressions, speeding up the editing experience.</td>
                </tr>
                <tr>
                    <td><code>BulkFileAttributesRead</code></td>
                    <td>Disabled; warning</td>
                    <td>The 'Files.readAttributes' bulk call can be used instead of multiple file attribute calls</td>
                </tr>
                <tr>
                    <td><code>SlowListContainsAll</code></td>
                    <td>Warning</td>
                    <td>Call to <code>list.containsAll</code> may have poor performance</td>
                </tr>
                <tr>
                    <td><code>IllegalDependencyOnInternalPackage</code></td>
                    <td>Disabled; error</td>
                    <td>Illegal dependency on internal package</td>
                </tr>
                <tr>
                    <td><code>KotlinPlaceholderCountMatchesArgumentCount</code></td>
                    <td>Warning</td>
                    <td>Number of placeholders does not match number of arguments in logging call</td>
                </tr>
                <tr>
                    <td><code>NonExhaustiveWhenStatementMigration</code></td>
                    <td>Disabled; warning</td>
                    <td>Non-exhaustive <code>when</code> statements will be prohibited starting from version 1.7</td>
                </tr>
                <tr>
                    <td><code>RedundantScheduledForRemovalAnnotation</code></td>
                    <td>Warning</td>
                    <td>Redundant <code>@ScheduledForRemoval</code> annotation</td>
                </tr>
                <tr>
                    <td><code>ReplaceOnLiteralHasNoEffect</code></td>
                    <td>Warning</td>
                    <td>Replacement operation has no effect</td>
                </tr>


            </table>

        </chapter>

    </chapter>

    <chapter id="new-in-2022-2-php" title="Qodana for PHP">

        <chapter id="new-in-2022-2-php-new" title="New inspections">

        In version 2022.2, the Qodana for PHP linter obtained several new inspections.

        <table>
            <tr>
                <td>Inspection name</td>
                <td>Severity</td>
                <td>Description</td>
            </tr>
            <tr>
                <td><code>RegExpRedundantClassElement</code></td>
                <td>Weak warning</td>
                <td>Redundant <code>\d</code>, <code>[:digit:]</code>, or <code>\D</code> class elements</td>
            </tr>
            <tr>
                <td><code>MarkdownIncorrectlyNumberedListItem</code></td>
                <td>Warning</td>
                <td>
                    <p>Incorrectly numbered list item.</p>
                    <p>Marks an ordered list like <code>1. 2. 4.</code> as inconsistently numbered. After rendering,
                        this list is displayed as <code>1. 2. 3.</code>, but the inconsistency makes editing the
                        source code harder.</p>
                </td>
            </tr>
            <tr>
                <td><code>PhpIntRangesMismatchInspection</code></td>
                <td>Warning</td>
                <td>
                    <p>Number range mismatch.</p>
                    <p>Marks return statements containing numerals outside the range, for example, in
                        <code>returns int&lt;0,10&gt;</code>. Also works for fields, field constructors, and function calls.</p>
                </td>
            </tr>
            <tr>
                <td><code>PhpVarTagWithoutVariableNameInspection</code></td>
                <td>Weak warning</td>
                <td>
                    <p>Type tag without a variable name.</p>
                    <p>The <code>@param string</code> PHPDoc snippet is redundant, and it should be either removed or
                        replaced with <code>@param string $argument</code> explaining that the argument is a string.</p>
                </td>
            </tr>
            <tr>
                <td><code>PhpLoopCanBeReplacedWithStdFunctionCallsInspection</code></td>
                <td>Weak warning</td>
                <td>
                    <p>A typical loop consisting of three lines can be replaced with the <code>in_array()</code> or <code>array_key_exists()</code>.</p>
                </td>
            </tr>
            <tr>
                <td><code>PhpPregSplitWithoutRegExpInspection</code></td>
                <td>Weak warning</td>
                <td>
                    <p>The <code>preg_split()</code> function can be replaced with <code>explode()</code> function.</p>
                </td>
            </tr>
            <tr>
                <td><code>PhpCombineMultipleIssetCallsIntoOneInspection</code></td>
                <td>Informational</td>
                <td>Multiple <code>isset</code> calls like <code>isset($var1) &amp;&amp; isset($var2)</code> can be replaced
                    with a single call like <code>isset($var1, $var2)</code>.</td>
            </tr>
            <tr>
                <td><code>PhpArrayTraversableCanBeReplacedWithIterableInspection</code></td>
                <td>Weak warning</td>
                <td>The <code>array|Traversable</code> type hint can be replaced with <code>iterable</code></td>
            </tr>

            <tr>
                <td><code>PhpEchoOpenTagInspection</code></td>
                <td>Informational</td>
                <td>The verbose <code>&lt;?php echo</code> can be replaced with <code>&lt;?=</code>.</td>
            </tr>
            <tr>
                <td><code>PhpAccessStaticViaInstanceInspection</code></td>
                <td>Weak warning</td>
                <td>
                    <p>A class static member is accessed via an instance.</p>
                    <p>Similar to Java, a class static member should not be accessed via an instance expression because
                        that would mean that it might be different for each instance.</p>
                </td>
            </tr>
            <tr>
                <td><code>PhpMockeryInvalidMockingMethodInspection</code></td>
                <td>Error</td>
                <td>
                    <p>Invalid Mockery mocking target</p>
                    <p>In Mockery tests, methods cannot be private. If protected, they must be specifically enabled
                        using <code>shouldAllowMockingProtectedMethods</code>.</p>
                </td>
            </tr>
            <tr>
                <td><code>BladeUnpairedParenthesesInStringLiteral</code></td>
                <td>Error</td>
                <td>
                    <p>Parse error due to unpaired parentheses in string literals.</p>
                    <p>Early detection of unpaired parentheses in string literals that are later parsed by the Blade
                        template engine.</p>
                </td>
            </tr>
        </table>
        </chapter>

        <chapter id="new-in-2022-2-php-enabled" title="Enabled inspections">

            <table>
                <tr>
                    <td>Inspection name</td>
                    <td>Severity</td>
                    <td>Description</td>
                </tr>
                <tr>
                    <td><code>RegExpSimplifiable</code></td>
                    <td>Warning</td>
                    <td>
                        <p>Regular expression can be simplified.</p>
                        <p>A regular expression like <code>[\wa-z\d]</code> can be replaced with <code>\w</code> because
                            the latter already includes <code>a-z</code>, as well as numerals.</p>
                    </td>
                </tr>
                <tr>
                    <td><code>RegExpSuspiciousBackref</code></td>
                    <td>Weak warning</td>
                    <td>
                        <p>Suspicious back reference.</p>
                        <p>A regular expression like <code>\1(abc)</code> cannot match anything because <code>\1</code> refers
                            to <code>abc</code> that is not yet defined when evaluating  <code>\1</code>. This inspection
                            prevents simple typos in regular expressions, speeding up the editing experience.</p>
                    </td>
                </tr>
            </table>


        </chapter>

    </chapter>

</topic>
